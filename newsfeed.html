<!DOCTYPE html>
<html>
  <head>
    <title>News Feed</title>
    <link
      rel="stylesheet"
      href="/assets/bootstrap/css/bootstrap.min.css" 
    />
    <link rel="stylesheet" href="/assets/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="/assets/fontawesome/css/solid.min.css">
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="navigation" class="navigation-container">
      <!-- This will include the navigation bar -->
      <!-- The path to the navigation.html file may vary depending on your project structure -->
      <!-- Make sure to use the correct relative path to the navigation.html file -->
      <!-- For example, if the navigation.html file is in the same directory as your HTML file, the path would be "./navigation.html" -->
      <!-- If the navigation.html file is in a parent directory, the path would be "../navigation.html" -->
      <!-- You can also use an absolute path if needed -->
      <!-- <div class="navigation-container" w3-include-html="./navigation.html"></div> -->
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2">
          <div class="card mb-3">
            <div id="sidebar-left" class="navigation-container"></div>
          </div> 
        </div>
        <div class="col-md-7">
          <div  class="card mb-3">
            <div id="posting-section" class="card-body">
              <div id="profile-picture-container-newsfeed">
                <!-- Profile Picture will be added here -->
              </div>
              <form>
                <div class="form-group">
                  <textarea
                    class="form-control"
                    placeholder="Type here"
                  ></textarea>
                </div>
                <button id ="post__btn" type="submit" class="btn btn-primary">Post</button>
              </form>
            </div>
          </div>
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">News Feed</h5>
              <ul id="news-feed" class="list-group">
                <!-- news feed items will be dynamically added here -->
              </ul>
            </div>
          </div>
        </div>
        <div id="chat-box">
          <div class="chat-header">
            <span>Chat</span>
            <button id="minimize-chat-button" class="chat-action-button">
              -
            </button>
          </div>
          <div id="chat-content">
            <!-- Chat messages will be added here -->
          </div>
          <div class="chat-footer">
            <input
              type="text"
              id="search-input"
              placeholder="Search for users..."
            />
            <button id="search-button" class="chat-action-button">
              Search
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="newsfeed.js"></script>
    <script>
      // This code is used to include the HTML code from navigation.html into the current HTML file
      fetch("./navigation.html")
        .then((response) => response.text())
        .then((data) => {
          const navigationContainer = document.getElementById("navigation");
          navigationContainer.innerHTML = data;
        });

       // This code is used to include the HTML code from sidebar-left.html into the current HTML file
      fetch("./sidebar-left.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("sidebar-left").innerHTML = data;
        });

      // Chat box
      const chatBox = document.getElementById("chat-box");
      const minimizeChatButton = document.getElementById(
        "minimize-chat-button"
      );

      // Minimize or expand the chat box
      minimizeChatButton.addEventListener("click", () => {
        chatBox.classList.toggle("chat-box-minimized");
      });

      // Dummy data for sample users
      const users = [
        {
          name: "Jane Doe",
          email: "jane.doe@example.com",
          image: "https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=60&q=80",
        },
        {
          name: "Bob Johnson",
          email: "bob.johnson@example.com",
          image: "https://images.unsplash.com/photo-1544723795-3fb6469f5b39?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=60&q=80",
        },
        {
          name: "Mary Lee",
          email: "mary.lee@example.com",
          image: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=50&q=60",
        },
        {
          name: "John Smith",
          email: "john.smith@example.com",
          image: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZmlsZSUyMHBpY3R1cmV8ZW58MHx8MHx8&auto=format&fit=crop&w=50&q=60",
        },
      ];

      const loggedInUser = {
          name: "Benito Camela",
          email: "benito.camela@example.com",
          image: "https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=200&q=80",      
      };

      // Display loggedInUser Image
      const profilePictureNewsFeed = document.getElementById("profile-picture-container-newsfeed");
      const image = `<img src="${loggedInUser.image}" id="profile-picture-newsfeed">`;
      profilePictureNewsFeed.innerHTML = image;
      // profilePictureNewsFeed.appendChild(image);

      // Display users in the chat
      const chatContent = document.getElementById("chat-content");
      users.forEach((user) => {
        const message = document.createElement("div");
        message.classList.add("chat-message");
        message.innerHTML = `
          <img src="${user.image}" class="chat-message-user-image">
          <div class="chat-message-user">${user.name}</div>
        `;
        chatContent.appendChild(message);
      });

      // Search for users
      const searchInput = document.getElementById("search-input");
      const searchButton = document.getElementById("search-button");

      searchButton.addEventListener("click", () => {
        const searchText = searchInput.value.trim().toLowerCase();
        const searchResults = users.filter(
          (user) =>
            user.name.toLowerCase().includes(searchText) ||
            user.email.toLowerCase().includes(searchText)
        );

        // Display search results in the chat content
        chatContent.innerHTML = "";
        searchResults.forEach((user) => {
          const message = document.createElement("div");
          message.classList.add("chat-message");
          message.innerHTML = `
          <img src="${user.image}" class="chat-message-user-image" width="50">
          <div class="chat-message-user">${user.name}</div>
          <div class="chat-message-email">${user.email}</div>
        `;
          chatContent.appendChild(message);
        });
      });

      // Open the chat box by default
      chatBox.classList.remove("chat-box-minimized");
    </script>
  </body>
</html>
